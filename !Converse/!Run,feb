| >!Run
|

Set Converse$Dir <Obey$Dir>
Set Converse$Path <Converse$Dir>.

IconSprites <Converse$Dir>.!Sprites

If "<Converse$Running>" = "1" Then Error Converse is already running.

RMEnsure UtilityModule 3.70 Error RISC OS 3.70 or higher is required.
If "<System$Path>" = "" Then Error 0 !System resources cannot be found.
If "<SerialDev$Path>" = "" then Error 0 !SerialDev device drivers cannot be found.

RMEnsure SharedCLibrary 6.23 RMLoad System:Modules.CLib
RMEnsure SharedCLibrary 6.23 Error 0 Shared C Library 6.23 or higher is requred.

Set ARCbbs$text <Converse$Dir>.Temp
Set ARCbbsA$text <Converse$Dir>.Temp
Set Binkley$Dir <Converse$Dir>.FTN
Set Binkley$Path <Binkley$Dir>.

Set Converse$Loaded 1
RMEnsure ConverseBBS 0.00 Set Converse$Loaded 0
If "<Converse$Loaded>" = "1" Then RMKill ConverseBBS
If "<Converse$Loaded>" = "1" Then RMKill ConversePipes
If "<Converse$Loaded>" = "1" Then RMKill ConverseFiler
If "<Converse$Loaded>" = "1" Then RMKill ConverseDoors
If "<Converse$Loaded>" = "1" Then RMKill ARCbbs_Filer
If "<Converse$Loaded>" = "1" Then RMKill ARCbbs_Doors

RMLoad <Converse$Dir>.Resources.Support
RMLoad <Converse$Dir>.Resources.Pipes
RMLoad <Converse$Dir>.Resources.Filer
RMLoad <Converse$Dir>.Resources.Doors
RMLoad <Converse$Dir>.Resources.ARCbbsFlr
RMLoad <Converse$Dir>.Resources.ARCbbs

WimpSlot -Min 64k -Max 64k
Run <Converse$Dir>.Resources.ResFind Converse

WimpSlot -Min 256k -Max 256k
Run <Converse$Dir>.Resources.Server %*0
