{
    more 0
    
    label main_menu
    cls
    fgbg 7 0
    doing `Main Menu`
    script `<Converse$Dir>.BBS.ANSI.Header`
    script `<Converse$Dir>.BBS.Menus.Main`
    script `<Converse$Dir>.BBS.ANSI.Footer`
    
    fgbg 15 0
    print `\r\n    Your choice [`
    fg 14
    print `M F D B O U Y W C G`
    fg 15
    print `]: `
    prompt choice char echo upper
    print `\r\n`
    if choice == `M` goto messages
    if choice == `F` goto files
    if choice == `D` goto games
    if choice == `B` goto bulletins
    if choice == `O` goto online
    if choice == `U` goto user_settings
    if choice == `Y` goto statistics
    if choice == `W` goto whoami
    if choice == `C` goto chat
    if choice == `G` goto goodbye
    goto main_menu

    label messages
    doing `Message Areas`
    messagebase list
    messagebase select
    
    label message_menu
    cls
    type `<Converse$Dir>.BBS.ANSI.Header`
    type `<Converse$Dir>.BBS.Menus.Messages`
    type `<Converse$Dir>.BBS.ANSI.Footer`
    
    fgbg 15 0
    print `\r\n    Message command [`
    fg 14
    print `L S R P N ? Q`
    fg 15
    print `]: `
    prompt mchoice char echo upper
    print `\r\n`
    
    if mchoice == `L` then
        messagebase areas
        anykey
        goto message_menu
    end if
    
    if mchoice == `S` then
        messagebase area
        goto message_menu
    end if
    
    if mchoice == `R` then
        messagebase messages
        goto message_menu
    end if
    
    if mchoice == `P` then
        print `\r\n    `
        bold
        print `Post New Message`
        std
        print `\r\n\r\n`
        print `    To: `
        readline msgto
        print `    Subject: `
        readline msgsubject
        print `\r\n    Post this message? (Y/N): `
        yesno postconfirm
        if postconfirm == 0 then
            print `    Message cancelled.\r\n`
            anykey
            goto message_menu
        end if
        messagebase post
        goto message_menu
    end if
    
    if mchoice == `N` then
        messagebase messages
        goto message_menu
    end if
    
    if mchoice == `?` then
        fgbg 14 0
        print `\r\n    Message Area Help:\r\n`
        fgbg 7 0
        print `    L - List all available message areas\r\n`
        print `    S - Select a different message area\r\n`
        print `    R - Read messages in the current area\r\n`
        print `    P - Post a new message\r\n`
        print `    N - Read only new messages\r\n`
        print `    Q - Return to Main Menu\r\n`
        anykey
        goto message_menu
    end if
    
    if mchoice == `Q` goto main_menu
    goto message_menu

    label files
    doing `File Areas`
    filebase list
    filebase select
    
    label file_menu
    cls
    type `<Converse$Dir>.BBS.ANSI.Header`
    type `<Converse$Dir>.BBS.Menus.Files`
    type `<Converse$Dir>.BBS.ANSI.Footer`
    
    fgbg 15 0
    print `\r\n    File command [`
    fg 14
    print `L S D U N I ? Q`
    fg 15
    print `]: `
    prompt fchoice char echo upper
    print `\r\n`
    
    if fchoice == `L` then
        filebase areas
        anykey
        goto file_menu
    end if
    
    if fchoice == `S` then
        filebase area
        goto file_menu
    end if
    
    if fchoice == `D` then
        print `\r\n    Enter file ID to download: `
        readline dlfileid
        print `    Confirm download? (Y/N): `
        yesno dlconfirm
        if dlconfirm == 0 then
            print `    Download cancelled.\r\n`
            anykey
            goto file_menu
        end if
        filebase download %{dlfileid}
        goto file_menu
    end if
    
    if fchoice == `U` then
        print `\r\n    `
        bold
        print `File Upload`
        std
        print `\r\n\r\n`
        print `    Enter filename: `
        readline ulfilename
        print `    Enter description: `
        readline uldesc
        print `\r\n    Ready to upload? (Y/N): `
        yesno ulconfirm
        if ulconfirm == 0 then
            print `    Upload cancelled.\r\n`
            anykey
            goto file_menu
        end if
        filebase upload
        goto file_menu
    end if
    
    if fchoice == `N` then
        filebase files
        anykey
        goto file_menu
    end if
    
    if fchoice == `I` then
        print `\r\n    Enter file ID: `
        prompt fileid line
        filebase info %{fileid}
        anykey
        goto file_menu
    end if
    
    if fchoice == `?` then
        fgbg 14 0
        print `\r\n    File Area Help:\r\n`
        fgbg 7 0
        print `    L - List all available file areas\r\n`
        print `    S - Select a different file area\r\n`
        print `    D - Download a file\r\n`
        print `    U - Upload a file\r\n`
        print `    N - List new files since last visit\r\n`
        print `    I - View information about a file\r\n`
        print `    Q - Return to Main Menu\r\n`
        anykey
        goto file_menu
    end if
    
    if fchoice == `Q` goto main_menu
    goto file_menu

    label bulletins
    doing `Bulletins`
    cls
    fgbg 11 0
    print `+============================================================================+\r\n`
    print `|                         `
    fg 14
    print `System Bulletins`
    fg 11
    print `                                |\r\n`
    print `+============================================================================+\r\n`
    fgbg 7 0
    print `\r\n`
    fg 14
    print `    [1]`
    fg 7
    print ` Welcome and Rules\r\n`
    fg 14
    print `    [2]`
    fg 7
    print ` Recent Updates\r\n`
    fg 14
    print `    [3]`
    fg 7
    print ` About This BBS\r\n`
    fg 14
    print `    [Q]`
    fg 7
    print ` Return to Main Menu\r\n`
    print `\r\n`
    fgbg 15 0
    print `    Select bulletin: `
    prompt bchoice char echo
    print `\r\n`
    
    if bchoice == `Q` goto main_menu
    if bchoice == `q` goto main_menu
    fgbg 14 0
    print `\r\n    Bulletin content would be displayed here.\r\n`
    fgbg 7 0
    anykey
    goto bulletins

    label online
    doing `Online Users`
    cls
    fgbg 11 0
    print `+============================================================================+\r\n`
    print `|                         `
    fg 14
    print `Users Online Now`
    fg 11
    print `                                |\r\n`
    print `+============================================================================+\r\n`
    fgbg 7 0
    print `\r\n`
    online
    print `\r\n`
    anykey
    goto main_menu

    label user_settings
    doing `User Settings`
    
    label user_menu
    cls
    type `<Converse$Dir>.BBS.ANSI.Header`
    type `<Converse$Dir>.BBS.Menus.User`
    type `<Converse$Dir>.BBS.ANSI.Footer`
    
    fgbg 15 0
    print `\r\n    Setting [`
    fg 14
    print `P E S T M V Q`
    fg 15
    print `]: `
    prompt uchoice char echo upper
    print `\r\n`
    
    if uchoice == `P` then
        fgbg 14 0
        print `\r\n    Change Password:\r\n`
        fgbg 7 0
        print `    Enter current password: `
        readline oldpass noecho
        print `    Enter new password:     `
        readline newpass noecho
        print `    Confirm new password:   `
        readline confirm noecho
        print `\r\n`
        bold
        print `    (Password change not yet implemented)\r\n`
        std
        anykey
        goto user_menu
    end if
    
    if uchoice == `E` then
        fgbg 14 0
        print `\r\n    Change Email Address:\r\n`
        fgbg 7 0
        print `    Current: %{email}\r\n`
        print `    Enter new email: `
        readline newemail
        print `\r\n`
        bold
        print `    (Email change not yet implemented)\r\n`
        std
        anykey
        goto user_menu
    end if
    
    if uchoice == `V` goto whoami
    if uchoice == `Q` goto main_menu
    fgbg 14 0
    print `\r\n    This option is not yet implemented.\r\n`
    fgbg 7 0
    anykey
    goto user_menu

    label statistics
    doing `Your Statistics`
    cls
    fgbg 11 0
    print `+============================================================================+\r\n`
    print `|                        `
    fg 14
    print `Your Usage Statistics`
    fg 11
    print `                            |\r\n`
    print `+============================================================================+\r\n`
    fgbg 7 0
    print `\r\n`
    print `    Username:      `
    fg 15
    print `%{username}\r\n`
    fg 7
    print `    Real Name:     `
    fg 15
    print `%{realname}\r\n`
    fg 7
    print `    Access Level:  `
    fg 15
    print `%{accesslevel}\r\n`
    fg 7
    print `    User ID:       `
    fg 15
    print `%{userid}\r\n`
    fgbg 7 0
    print `\r\n`
    anykey
    goto main_menu

    label whoami
    doing `User Info`
    cls
    fgbg 11 0
    print `+============================================================================+\r\n`
    print `|                         `
    fg 14
    print `Your User Profile`
    fg 11
    print `                               |\r\n`
    print `+============================================================================+\r\n`
    fgbg 7 0
    print `\r\n`
    fg 14
    print `    Username:`
    fg 7
    print `       %{username}\r\n`
    fg 14
    print `    Real Name:`
    fg 7
    print `      %{realname}\r\n`
    fg 14
    print `    User ID:`
    fg 7
    print `        %{userid}\r\n`
    fg 14
    print `    Access Level:`
    fg 7
    print `   %{accesslevel}\r\n`
    fg 14
    print `    Sysop:`
    fg 7
    print `          %{sysop}\r\n`
    fg 14
    print `    Keys:`
    fg 7
    print `           %{keys}\r\n`
    fg 14
    print `    Line:`
    fg 7
    print `           %{line}\r\n`
    print `\r\n`
    anykey
    goto main_menu

    label chat
    doing `Paging Sysop`
    cls
    fgbg 11 0
    print `+============================================================================+\r\n`
    print `|                         `
    fg 14
    print `Chat with Sysop`
    fg 11
    print `                                 |\r\n`
    print `+============================================================================+\r\n`
    fgbg 7 0
    print `\r\n`
    bold
    print `    Page the System Operator?`
    std
    print ` (Y/N): `
    yesno chatconfirm
    if chatconfirm == 0 goto main_menu
    print `\r\n    Reason for chat: `
    readline chatreason
    print `\r\n    Paging the System Operator...\r\n`
    print `\r\n`
    sysopchat
    goto main_menu

    label games
    doing `Games & Doors`
    
    label games_menu
    cls
    type `<Converse$Dir>.BBS.ANSI.Header`
    type `<Converse$Dir>.BBS.Menus.Games`
    type `<Converse$Dir>.BBS.ANSI.Footer`
    
    fgbg 15 0
    print `\r\n    Select game [`
    fg 14
    print `1-9 Q`
    fg 15
    print `]: `
    prompt gchoice char echo upper
    print `\r\n`
    
    if gchoice == `Q` goto main_menu
    
    if gchoice == `1` then
        doing `Trade Wars 2002`
        fgbg 14 0
        print `\r\n    Trade Wars 2002\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `2` then
        doing `Legend of the Red Dragon`
        fgbg 14 0
        print `\r\n    Legend of the Red Dragon\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `3` then
        doing `Usurper`
        fgbg 14 0
        print `\r\n    Usurper\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `4` then
        doing `Global War`
        fgbg 14 0
        print `\r\n    Global War\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `5` then
        doing `Planets: TEOS`
        fgbg 14 0
        print `\r\n    Planets: The Exploration of Space\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `6` then
        doing `Hangman`
        fgbg 14 0
        print `\r\n    Hangman\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `7` then
        doing `Trivia Challenge`
        fgbg 14 0
        print `\r\n    Trivia Challenge\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `8` then
        doing `Blackjack`
        fgbg 14 0
        print `\r\n    Blackjack\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    if gchoice == `9` then
        doing `Snake`
        fgbg 14 0
        print `\r\n    Snake\r\n`
        fgbg 7 0
        print `    [Demo placeholder - door not installed]\r\n`
        anykey
        goto games_menu
    end if
    
    goto games_menu

    label goodbye
    cls
    fgbg 11 0
    print `+============================================================================+\r\n`
    print `|                           `
    fg 14
    print `Leaving So Soon?`
    fg 11
    print `                              |\r\n`
    print `+============================================================================+\r\n`
    fgbg 7 0
    print `\r\n`
    bold
    print `    Are you sure you want to log off? `
    std
    print `(Y/N): `
    yesno logoffconfirm
    if logoffconfirm == 0 goto main_menu
    print `\r\n`
    script `<Converse$Dir>.BBS.Goodbye`
    logoff
    return
}
