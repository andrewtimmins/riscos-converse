            _  ___      _     _   _    _                _           
           | |/ _ \    | |   | | | |  | |              | |          
           | | |_| | __| | __| | | |__| | ___  __ _  __| | ___ _ __ 
           | |  _  |/ _` |/ _` | |  __  |/ _ \/ _` |/ _` |/ _ \ '__|
           |_| | | | (_| | (_| | | |  | |  __/ (_| | (_| |  __/ |   
           (_)_| |_|\__,_|\__,_| |_|  |_|\___|\__,_|\__,_|\___|_|   
           =========================================================

© Werewolf Software & Gilbert the Hamster Software 1996
Written by Dane Koekoek & Quintin Parker
Version 1.00 (08-Apr-96)

Introduction
~~~~~~~~~~~~
!AddHeader is a little program to add a header to filelists generated by ArmBBS.

As it stands, ArmBBS allows the user to create a filelist on-the-spot by a press of a key. However there is no way to add headers automatically as it generates filelists for the user in real time. ArmBBS sends down the line a file called something like FScratch_0 and the user, calling various BBS's ends up with 5 of these files, all called the same with no identification as to which BBS has which files! He gives up and deletes all the lists and never calls those BBS's again.

!AddHeader solves this problem by taking the filelist created by ArmBBS and adding your BBS's customised header and the date & time it was created, along with renaming the file to something like your BBS's name, so the user can store them away easily and can simply find which BBS each of the filelists come from! He/she'll know which BBS to call again to pickup and upload those files to!

Using !AddHeader
~~~~~~~~~~~~~~~~
Right, enough chat. What you're all waiting to find out is how to use !AddHeader.

The first step is to copy !AddHeader out of this archive to another place with the rest of your ArmBBS utilities. I have it stored in a directory inside !ArmBBS called Support.

Inside !AddHeader is a directory called Headers. Inside here are three files - Current, Full and New. They are the three different types of filelist a user can create with the default ArmBBS setup - filelist of the Current filearea, the Full filelist and the New files list since last logon. Edit these till they're ready to go on top of your BBS's filelists. I add a little line describing which type of filelist the user has chosen on my system, but you may prefer to have a completely different style header for every type, or the same throughout.

Next load up the Config file inside into your favourite text editor. It'll look something like this:
===================================================================================
Full Header Path:<AddHeader$Dir>.Headers.Full
New Header Path:<AddHeader$Dir>.Headers.New
Curr Header Path:<AddHeader$Dir>.Headers.Current
Filelist Path:<ArmBBS$Dir>.Temp.FScratch_
Full Path:<ArmBBS$Dir>.Temp.WerewolfFL
===================================================================================
The first three lines should be self explanatory - the paths of the three different headers. The forth line gives the path of the filelist created by ArmBBS, minus the port number on the end. The fifth line shows the output path of where the combined header+filelist will be outputted to. I've chosen to call mine WerewolfFL, which is an easy description of what the file is to the user. It is stored inside !ArmBBS, in a directory called Temp. Note that the file's name should NOT exceed 10 characters, unless you're using something like LongFiles.

Do not try to run !AddHeader as it will not run unless being loaded straight from an ArmBBS script file with the right parameters.

Once they're all customised, on with the script file settings for inside ArmBBS. The following is a section out of my !ArmBBS.Menus.Filebase.Special file script:
===================================================================================
  defitem D
  display `Create and download new-files filelist`
  help `Create and download a new-files filelist from when you last called`
  [
    log `>Downloading nf filelist!`
    doing `Downloading nf filelist`
    filereset `G N #0`
    filelist Q
    if RET=0
      oscli `Wimptask Run <ArmBBS$Dir>.Support.!AddHeader -N ¤line¤`
      sendfile ¤var5¤ <ArmBBS$Dir>.Temp.WerewolfFL
    else
      print `\10No new files\10`
    endif
    anykey
  ]
  enditem

  defitem L
  display `Create and download FULL filelist`
  help `Create and download the FULL filelist on-the-spot`
  [
    log `>Downloading filelist!`
    doing `Downloading filelist`
    filereset `G #0`
    filelist Q
    if RET=0
      oscli `Wimptask Run <ArmBBS$Dir>.Support.!AddHeader -F ¤line¤`
      sendfile ¤var5¤ <ArmBBS$Dir>.Temp.WerewolfFL
    else
      print `\10No files!\10`
    endif
    anykey
  ]
  enditem

  defitem C
  display `Create and download local filelist`
  help `Create and download a filelist for the current filearea`
  [
    log `>Downloading local filelist!`
    doing `Downloading local filelist`
    fg 3
    print `\10Downloading filelist for area ¤fileareaname¤\10`
    filereset
    filelist Q
    if RET=0
      oscli `Wimptask Run <ArmBBS$Dir>.Support.!AddHeader -C ¤line¤`
      sendfile ¤var5¤ <ArmBBS$Dir>.Temp.WerewolfFL
    else
      print `\10No files!\10`
    endif
    anykey
  ]
  enditem
===================================================================================
Basically, this is exactly the same as the default, apart from the fact that when it comes to sending the file down the line, it runs !AddHeader with a parameter. -C is for Current filelist, -F is for the Full filelist, and -N if for the New files filelist. After that comes the parameter ¤line¤ which passes on which line the user is on, and thus what the file FScratch_x will be called. Then the file WerewolfFL inside !ArmBBS.Temp is sent down the line, which is the finished product.

Problems
~~~~~~~~
If you've got any problems with !AddHeader, or have any comments or suggestions, then just contact me in any of the ways listed below.

The only problem I've come across is if there isn't enough free memory to load the filelist and the header, and then it only brings up an error box which should be acknowledged by NoError quite easily.

Credits
~~~~~~~
For the idea of this must surely go to me!

For knocking up a small bit of code to merge the two files in 2 minutes after mentioning the idea on the phone goes to Quintin Parker.

For messing about with loads of code to increase and decrease memory allocation, and eventulally giving up and rewritting it in a completely different way goes to Quintin Parker.

For the truly whacky sprite, Quintin Parker also gets the praise.

For the truly configuarable application with a config file for different headers, goes to myself.

For the truly great example headers, goes to myself.

For this help file detailing how to set !AddHeader up, goes to myself too.

Contacting me
~~~~~~~~~~~~~
You can contact me in any of the following ways:
Email:
  Dane Koekoek (#1) on The Werewolf BBS (0181-289 6003 * 6pm-8am weekdays,
                                         24 hours at the weekends)
  Dane Koekoek@2:254/310 on FidoNet
  Dane Koekoek on Arcade or Digibank
  DKoekoek@digibank.demon.co.uk
Snail Mail:
  Dane Koekoek
  23 The Spinneys,
  Bromley,
  Kent BR1 2NT.
  England.

You can contact Quintin Parker on The Werewolf BBS.
