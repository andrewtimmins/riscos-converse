/* ******************************************************************************************************************************************************** */
/* FTN Mailer - Debug Implementation                                                                                                                        */
/* ******************************************************************************************************************************************************** */

#include <stdio.h>
#include <stdarg.h>

#include "kernel.h"
#include "swis.h"

#include "debug.h"

/* ******************************************************************************************************************************************************** */
/* Debug Output                                                                                                                                             */
/* ******************************************************************************************************************************************************** */

void debug_printf(const char *format, ...)
{
    char buffer[512];
    va_list args;
    _kernel_swi_regs regs;

    va_start(args, format);
    vsnprintf(buffer, sizeof(buffer), format, args);
    va_end(args);

    /* Output via Reporter module if available */
    regs.r[0] = (int)buffer;
    _kernel_swi(0x54C80, &regs, &regs);  /* Report_Text0 */
}
